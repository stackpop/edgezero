# This manifest describes the shared AnyEdge application and its adapter-specific configurations.

[app]
name = "{{name}}"
middleware = ["anyedge_core::middleware::RequestLogger"]
version = "0.1.0"
kind = "http"
entry = "crates/{{proj_core}}"

[[triggers.http]]
id = "root"
path = "/"
methods = ["GET"]
handler = "{{proj_core_mod}}::handlers::root"
adapters = [{{{adapter_list}}}]
description = "Default health-check endpoint"

[[triggers.http]]
id = "echo"
path = "/echo/{name}"
methods = ["GET"]
handler = "{{proj_core_mod}}::handlers::echo"
adapters = [{{{adapter_list}}}]

[[triggers.http]]
id = "stream"
path = "/stream"
methods = ["GET"]
handler = "{{proj_core_mod}}::handlers::stream"
adapters = [{{{adapter_list}}}]
body-mode = "stream"

[[triggers.http]]
id = "headers"
path = "/headers"
methods = ["GET"]
handler = "{{proj_core_mod}}::handlers::headers"
adapters = [{{{adapter_list}}}]

[[triggers.http]]
id = "echo_json"
path = "/echo"
methods = ["POST"]
handler = "{{proj_core_mod}}::handlers::echo_json"
adapters = [{{{adapter_list}}}]


[[triggers.http]]
id = "proxy_demo"
path = "/proxy/{*rest}"
methods = ["GET", "POST"]
handler = "{{proj_core_mod}}::handlers::proxy_demo"
adapters = [{{{adapter_list}}}]

[environment]

[[environment.variables]]
name = "API_BASE_URL"
description = "Base URL for upstream API calls"
env = "API_BASE_URL"
value = "https://example.com/api"

[[environment.secrets]]
name = "API_TOKEN"
description = "Secret token used when calling the upstream API"
adapters = [{{{adapter_list}}}]
env = "API_TOKEN"

{{{adapter_manifest_sections}}}
